# Switch2Trae æ’ä»¶å‘å¸ƒæŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•å°† Switch2Trae æ’ä»¶å‘å¸ƒåˆ° JetBrains æ’ä»¶å¸‚åœºã€‚

## ğŸ“‹ å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

### âœ… ä»£ç è´¨é‡æ£€æŸ¥
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ä»£ç é€šè¿‡ç¼–è¯‘ï¼Œæ— è¯­æ³•é”™è¯¯
- [ ] å·²ä¿®å¤æ‰€æœ‰å·²çŸ¥ Bug
- [ ] ä»£ç ç¬¦åˆ Kotlin ç¼–ç è§„èŒƒ
- [ ] æ·»åŠ äº†é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£

### âœ… æ’ä»¶é…ç½®æ£€æŸ¥
- [ ] `plugin.xml` é…ç½®å®Œæ•´
- [ ] ç‰ˆæœ¬å·æ­£ç¡®è®¾ç½®
- [ ] æ’ä»¶æè¿°æ¸…æ™°å‡†ç¡®
- [ ] å…¼å®¹æ€§è®¾ç½®æ­£ç¡®
- [ ] å›¾æ ‡æ–‡ä»¶å­˜åœ¨ä¸”ç¬¦åˆè§„èŒƒ

### âœ… æµ‹è¯•éªŒè¯
- [ ] åœ¨ç›®æ ‡ IDE ç‰ˆæœ¬ä¸­æµ‹è¯•
- [ ] å¿«æ·é”®åŠŸèƒ½æ­£å¸¸
- [ ] èœå•é¡¹æ˜¾ç¤ºæ­£ç¡®
- [ ] è®¾ç½®é¡µé¢å·¥ä½œæ­£å¸¸
- [ ] é”™è¯¯å¤„ç†æœºåˆ¶æœ‰æ•ˆ

## ğŸ”§ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å¼€å‘è€…è´¦æˆ·

### 1.1 åˆ›å»º JetBrains è´¦æˆ·
1. è®¿é—® [JetBrains è´¦æˆ·é¡µé¢](https://account.jetbrains.com/)
2. æ³¨å†Œæ–°è´¦æˆ·æˆ–ä½¿ç”¨ç°æœ‰è´¦æˆ·ç™»å½•
3. å®Œå–„ä¸ªäººèµ„æ–™ä¿¡æ¯

### 1.2 ç”³è¯·å¼€å‘è€…æƒé™
1. è®¿é—® [JetBrains Marketplace](https://plugins.jetbrains.com/)
2. ç‚¹å‡»å³ä¸Šè§’ "Upload plugin"
3. é¦–æ¬¡ä¸Šä¼ éœ€è¦éªŒè¯å¼€å‘è€…èº«ä»½
4. å¡«å†™å¼€å‘è€…ä¿¡æ¯è¡¨å•

## ğŸ› ï¸ ç¬¬äºŒæ­¥ï¼šå®Œå–„æ’ä»¶é…ç½®

### 2.1 æ›´æ–° plugin.xml
ç¡®ä¿ä»¥ä¸‹ä¿¡æ¯å®Œæ•´ä¸”å‡†ç¡®ï¼š

```xml
<idea-plugin>
    <!-- æ’ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ -->
    <id>com.github.yan.switch2trae</id>
    
    <!-- æ’ä»¶åç§° -->
    <name>Switch2Trae</name>
    
    <!-- ç‰ˆæœ¬å· -->
    <version>1.1.0</version>
    
    <!-- å¼€å‘è€…ä¿¡æ¯ -->
    <vendor email="yanwanglaiye@proton.me" url="https://github.com/zhongyuanyidiankeng">Yan</vendor>
    
    <!-- æ’ä»¶æè¿° -->
    <description><![CDATA[
        è¯¦ç»†çš„æ’ä»¶åŠŸèƒ½æè¿°...
    ]]></description>
    
    <!-- æ›´æ–°æ—¥å¿— -->
    <change-notes><![CDATA[
        v1.1.0:
        - åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
        - æ”¯æŒé¡¹ç›®å’Œæ–‡ä»¶åˆ‡æ¢
        - æ™ºèƒ½å…‰æ ‡ä½ç½®åŒæ­¥
        - å¤šç§å‘½ä»¤è¡Œæ ¼å¼æ”¯æŒ
    ]]></change-notes>
    
    <!-- å…¼å®¹æ€§è®¾ç½® -->
    <idea-version since-build="251" until-build="251.*"/>
    
    <!-- ä¾èµ– -->
    <depends>com.intellij.modules.platform</depends>
</idea-plugin>
```

### 2.2 æ›´æ–° build.gradle.kts
ç¡®ä¿æ„å»ºé…ç½®æ­£ç¡®ï¼š

```kotlin
intellijPlatform {
    pluginConfiguration {
        // ç‰ˆæœ¬ä¿¡æ¯
        version = "1.1.0"
        
        // IDE ç‰ˆæœ¬å…¼å®¹æ€§
        ideaVersion {
            sinceBuild = "251"
            untilBuild = "251.*"
        }
        
        // æ›´æ–°æ—¥å¿—
        changeNotes = """
            <h3>v1.1.0 - å…¨å±€é…ç½®æ›´æ–°</h3>
            <ul>
                <li>âœ¨ æ”¯æŒ JetBrains IDE ä¸ Trae IDE ä¹‹é—´çš„æ— ç¼åˆ‡æ¢</li>
                <li>ğŸ¯ æ™ºèƒ½å…‰æ ‡ä½ç½®åŒæ­¥</li>
                <li>âŒ¨ï¸ å¿«æ·é”®æ”¯æŒ (Alt+Shift+P, Alt+Shift+O)</li>
                <li>ğŸ”§ å¤šç§å‘½ä»¤è¡Œæ ¼å¼æ”¯æŒ</li>
                <li>ğŸ› ï¸ çµæ´»çš„é…ç½®é€‰é¡¹</li>
            </ul>
        """.trimIndent()
    }
    
    publishing {
        // å‘å¸ƒé…ç½®
        token = providers.environmentVariable("PUBLISH_TOKEN")
        channels = listOf("default")
    }
}
```

### 2.3 å‡†å¤‡æ’ä»¶å›¾æ ‡
- åˆ›å»º `pluginIcon.svg` æ–‡ä»¶ï¼ˆ40x40 åƒç´ ï¼‰
- ç¡®ä¿å›¾æ ‡æ¸…æ™°ã€ç®€æ´ã€ç¬¦åˆ JetBrains è®¾è®¡è§„èŒƒ
- æ”¾ç½®åœ¨ `src/main/resources/META-INF/` ç›®å½•ä¸‹

## ğŸ—ï¸ ç¬¬ä¸‰æ­¥ï¼šæ„å»ºæ’ä»¶

### 3.1 æœ¬åœ°æ„å»ºæµ‹è¯•
```bash
# æ¸…ç†é¡¹ç›®
./gradlew clean

# ç¼–è¯‘ä»£ç 
./gradlew compileKotlin

# è¿è¡Œæµ‹è¯•
./gradlew test

# æ„å»ºæ’ä»¶
./gradlew buildPlugin
```

### 3.2 éªŒè¯æ’ä»¶åŒ…
```bash
# æ’ä»¶åŒ…ä½ç½®
ls build/distributions/

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼æ–‡ä»¶ï¼š
# Switch2Trae-1.1.0.zip
```

### 3.3 æœ¬åœ°å®‰è£…æµ‹è¯•
1. æ‰“å¼€ IDE â†’ Settings â†’ Plugins
2. ç‚¹å‡»é½¿è½®å›¾æ ‡ â†’ Install Plugin from Disk
3. é€‰æ‹©æ„å»ºçš„ `.zip` æ–‡ä»¶
4. é‡å¯ IDE å¹¶æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

## ğŸ“¤ ç¬¬å››æ­¥ï¼šå‘å¸ƒåˆ°å¸‚åœº

### 4.1 æ‰‹åŠ¨ä¸Šä¼ æ–¹å¼

#### å‡†å¤‡å‘å¸ƒææ–™
1. **æ’ä»¶åŒ…**ï¼š`build/distributions/Switch2Trae-1.1.0.zip`
2. **æ’ä»¶æè¿°**ï¼šå‡†å¤‡è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜
3. **æˆªå›¾**ï¼šå‡†å¤‡ 2-5 å¼ åŠŸèƒ½æ¼”ç¤ºæˆªå›¾
4. **æ ‡ç­¾**ï¼šé€‰æ‹©åˆé€‚çš„åˆ†ç±»æ ‡ç­¾

#### ä¸Šä¼ æ­¥éª¤
1. è®¿é—® [JetBrains Marketplace](https://plugins.jetbrains.com/)
2. ç™»å½•å¼€å‘è€…è´¦æˆ·
3. ç‚¹å‡» "Upload plugin"
4. å¡«å†™æ’ä»¶ä¿¡æ¯ï¼š
   - **Plugin name**: Switch2Trae
   - **Category**: Tools Integration
   - **Tags**: ide-integration, productivity, tools
   - **Description**: ä½¿ç”¨ README ä¸­çš„è¯¦ç»†æè¿°
   - **License**: MIT
5. ä¸Šä¼ æ’ä»¶åŒ…æ–‡ä»¶
6. æ·»åŠ æˆªå›¾å’Œæ¼”ç¤ºå›¾ç‰‡
7. æäº¤å®¡æ ¸

### 4.2 è‡ªåŠ¨åŒ–å‘å¸ƒæ–¹å¼

#### é…ç½® GitHub Actions
åˆ›å»º `.github/workflows/publish.yml`ï¼š

```yaml
name: Publish Plugin

on:
  release:
    types: [published]

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '21'
          
      - name: Setup Gradle
        uses: gradle/gradle-build-action@v2
        
      - name: Publish Plugin
        env:
          PUBLISH_TOKEN: ${{ secrets.PUBLISH_TOKEN }}
        run: ./gradlew publishPlugin
```

#### é…ç½®å‘å¸ƒä»¤ç‰Œ
1. åœ¨ JetBrains Marketplace ç”Ÿæˆ API Token
2. åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ  Secretï¼š
   - Name: `PUBLISH_TOKEN`
   - Value: ä½ çš„ API Token

#### ä½¿ç”¨ Gradle å‘å¸ƒ
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export PUBLISH_TOKEN="your-api-token"

# å‘å¸ƒæ’ä»¶
./gradlew publishPlugin
```

## ğŸ” ç¬¬äº”æ­¥ï¼šå®¡æ ¸æµç¨‹

### 5.1 å®¡æ ¸æ—¶é—´
- **é¦–æ¬¡æäº¤**ï¼šé€šå¸¸éœ€è¦ 1-3 ä¸ªå·¥ä½œæ—¥
- **æ›´æ–°ç‰ˆæœ¬**ï¼šé€šå¸¸éœ€è¦ 1-2 ä¸ªå·¥ä½œæ—¥
- **èŠ‚å‡æ—¥æœŸé—´**ï¼šå¯èƒ½å»¶é•¿è‡³ 5-7 ä¸ªå·¥ä½œæ—¥

### 5.2 å®¡æ ¸æ ‡å‡†
JetBrains ä¼šæ£€æŸ¥ä»¥ä¸‹æ–¹é¢ï¼š
- **åŠŸèƒ½æ€§**ï¼šæ’ä»¶æ˜¯å¦æŒ‰æè¿°å·¥ä½œ
- **ç¨³å®šæ€§**ï¼šæ˜¯å¦å­˜åœ¨å´©æºƒæˆ–ä¸¥é‡ Bug
- **å®‰å…¨æ€§**ï¼šæ˜¯å¦åŒ…å«æ¶æ„ä»£ç 
- **åˆè§„æ€§**ï¼šæ˜¯å¦ç¬¦åˆå¹³å°æ”¿ç­–
- **è´¨é‡**ï¼šä»£ç è´¨é‡å’Œç”¨æˆ·ä½“éªŒ

### 5.3 å¸¸è§å®¡æ ¸é—®é¢˜
- **æè¿°ä¸å‡†ç¡®**ï¼šåŠŸèƒ½æè¿°ä¸å®é™…ä¸ç¬¦
- **å…¼å®¹æ€§é—®é¢˜**ï¼šåœ¨æŸäº› IDE ç‰ˆæœ¬ä¸­æ— æ³•å·¥ä½œ
- **æƒé™è¿‡åº¦**ï¼šè¯·æ±‚ä¸å¿…è¦çš„ç³»ç»Ÿæƒé™
- **UI é—®é¢˜**ï¼šç•Œé¢ä¸ç¬¦åˆ JetBrains è®¾è®¡è§„èŒƒ

## âœ… ç¬¬å…­æ­¥ï¼šå‘å¸ƒåç®¡ç†

### 6.1 ç›‘æ§åé¦ˆ
- å®šæœŸæ£€æŸ¥æ’ä»¶é¡µé¢çš„ç”¨æˆ·è¯„ä»·
- å…³æ³¨ GitHub Issues ä¸­çš„é—®é¢˜æŠ¥å‘Š
- ç›‘æ§ä¸‹è½½é‡å’Œä½¿ç”¨ç»Ÿè®¡

### 6.2 ç‰ˆæœ¬æ›´æ–°æµç¨‹
1. **ä¿®å¤ Bug æˆ–æ·»åŠ æ–°åŠŸèƒ½**
2. **æ›´æ–°ç‰ˆæœ¬å·**ï¼š
   ```kotlin
   version = "1.0.1"  // åœ¨ build.gradle.kts ä¸­
   ```
3. **æ›´æ–° change-notes**ï¼š
   ```kotlin
   changeNotes = """
       <h3>v1.0.1 - Bug ä¿®å¤</h3>
       <ul>
           <li>ğŸ› ä¿®å¤æ–‡ä»¶è·¯å¾„å¤„ç†é—®é¢˜</li>
           <li>ğŸ’¡ æ”¹è¿›é”™è¯¯æç¤ºä¿¡æ¯</li>
       </ul>
   """.trimIndent()
   ```
4. **æ„å»ºå¹¶å‘å¸ƒæ–°ç‰ˆæœ¬**

### 6.3 ç”¨æˆ·æ”¯æŒ
- åŠæ—¶å›å¤ç”¨æˆ·è¯„è®ºå’Œé—®é¢˜
- ç»´æŠ¤è¯¦ç»†çš„æ–‡æ¡£å’Œ FAQ
- æä¾›å¤šç§è”ç³»æ–¹å¼

## ğŸ“Š å‘å¸ƒæ£€æŸ¥è¡¨

### å‘å¸ƒå‰æœ€ç»ˆæ£€æŸ¥
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] æ›´æ–°æ—¥å¿—å·²å®Œå–„
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æˆªå›¾å·²å‡†å¤‡
- [ ] å‘å¸ƒä»¤ç‰Œå·²é…ç½®

### å‘å¸ƒåè·Ÿè¿›
- [ ] ç¡®è®¤æ’ä»¶åœ¨å¸‚åœºä¸­å¯è§
- [ ] æµ‹è¯•ä»å¸‚åœºå®‰è£…
- [ ] ç›‘æ§åˆæœŸç”¨æˆ·åé¦ˆ
- [ ] å‡†å¤‡å¿«é€Ÿä¿®å¤è®¡åˆ’

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### Q: æ’ä»¶å®¡æ ¸è¢«æ‹’ç»æ€ä¹ˆåŠï¼Ÿ
A: 
1. ä»”ç»†é˜…è¯»æ‹’ç»åŸå› 
2. æ ¹æ®åé¦ˆä¿®æ”¹ä»£ç 
3. æ›´æ–°ç‰ˆæœ¬å·
4. é‡æ–°æäº¤å®¡æ ¸

### Q: å¦‚ä½•å¤„ç†å…¼å®¹æ€§é—®é¢˜ï¼Ÿ
A:
1. åœ¨å¤šä¸ª IDE ç‰ˆæœ¬ä¸­æµ‹è¯•
2. ä½¿ç”¨æ¡ä»¶ç¼–è¯‘å¤„ç† API å·®å¼‚
3. é€‚å½“è®¾ç½® `since-build` å’Œ `until-build`

### Q: å¦‚ä½•æé«˜æ’ä»¶å¯è§æ€§ï¼Ÿ
A:
1. é€‰æ‹©å‡†ç¡®çš„åˆ†ç±»å’Œæ ‡ç­¾
2. æä¾›æ¸…æ™°çš„æè¿°å’Œæˆªå›¾
3. ç§¯æå›åº”ç”¨æˆ·åé¦ˆ
4. åœ¨ç¤¾åŒºä¸­æ¨å¹¿

## ğŸ“š å‚è€ƒèµ„æº

- [JetBrains æ’ä»¶å¼€å‘æ–‡æ¡£](https://plugins.jetbrains.com/docs/intellij/)
- [æ’ä»¶å¸‚åœºæœ€ä½³å®è·µ](https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html)
- [IntelliJ Platform Gradle Plugin](https://plugins.jetbrains.com/docs/intellij/tools-intellij-platform-gradle-plugin.html)
- [æ’ä»¶å‘å¸ƒæŒ‡å—](https://plugins.jetbrains.com/docs/intellij/publishing-plugin.html)

---

**ç¥ä½ å‘å¸ƒæˆåŠŸï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–åœ¨ GitHub Issues ä¸­æé—®ã€‚